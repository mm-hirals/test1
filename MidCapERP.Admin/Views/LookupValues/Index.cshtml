@model IEnumerable<MidCapERP.Dto.LookupValues.LookupValuesResponseDto>

@{
    ViewData["Title"] = "LookupValues";
}

<div class="c-card--wrapper">
    <div class="c-card--header">
        <h4 class="c-card--header-title">LookupValues</h4>
        <div class="c-card--header-action">
            <a class="c-card--header-action-btn btn btn-outline-primary"><i class='bx bx-plus me-2'></i>Filters</a>
            <a asp-controller="LookupValues" asp-action="Create"
               data-ajax-complete="onComplete" data-ajax="true" class="btn btn-primary"
               data-ajax-mode="replace" data-ajax-update="#UpdateLookupValuesDiv">Create New</a>
        </div>
    </div>
    <div class="c-card--body">
        <partial name="_LookupValuesTable" model="@Model" />
        <div id="UpdateLookupValuesDiv">
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
        await Html.RenderPartialAsync("_JqueryDatatableScriptsPartial");
    }

    <script type="text/javascript">
        var tblLookup;
        $(document).ready(function() {
            tblLookup = $("#tblLookupValues").DataTable({
                "searching": false,
                "processing": true,
                "serverSide": true,
                "filter": true,
                "ajax": {
                    "url": "/LookupValues/GetLookupValuesData",
                    "type": "POST",
                    "datatype": "json"
                },
                "columns": [
                    { "data": "lookupValueName", "name": "LookupValueName", "autoWidth": true },
                    { "data": "lookupId", "name": "LookupId", "autoWidth": true },
                    {
                        "mData": null,
                        "mRender": function(o) {
                            if (o.isDeleted) {
                                return ' <input type="checkbox" checked>';
                            } else {
                                return '<input type="checkbox">';
                            }
                        }
                    },
                    {
                        "mData": null, "bSortable": false,
                        "mRender": function(o) {
                            return '<a data-ajax-complete="onComplete" data-ajax="true" class="btn btn-primary" data-ajax-mode="replace" data-ajax-update="#UpdateLookupValuesDiv" href="/LookupValues/Update/' + o.lookupValueId + '">Update</a>' +
                                '&nbsp<a data-ajax-complete="onComplete" data-ajax="true" class="btn btn-primary" data-ajax-mode="replace" href="/LookupValues/Delete/' + o.lookupValueId + '">Delete</a>';
                        }
                    }
                ]
            });
        });

        function onComplete() {
            $("#lookUpValuesModal").modal('show');
        }
    </script>
}